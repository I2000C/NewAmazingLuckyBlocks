plugins{
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
    id 'kr.entree.spigradle' version '1.2.4'
}

ext{
    version='3.1.0_36'
    mainClass='me.i2000c.newalb.NewAmazingLuckyBlocks'
    groupId='me.i2000c.newalb'
    artifactId='newamazingluckyblocks'
    pluginName='NewAmazingLuckyBlocks'
}

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
java.sourceCompatibility = '8'
java.targetCompatibility = '8'

repositories{
    mavenCentral()
    maven { url 'https://repo.codemc.org/repository/maven-public/' }
    maven { url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots' }
    maven { url 'https://libraries.minecraft.net' }
    maven { url 'https://maven.enginehub.org/repo/' }
}

dependencies{
    implementation 'io.github.bananapuncher714:nbteditor:7.18.3'
    compileOnly 'io.github.bananapuncher714:nbteditor:7.18.3:javadoc'
    compileOnly 'io.github.bananapuncher714:nbteditor:7.18.3:sources'
    implementation 'com.github.cryptomorin:XSeries:9.0.0'
    compileOnly 'com.github.cryptomorin:XSeries:9.0.0:javadoc'
    compileOnly 'com.github.cryptomorin:XSeries:9.0.0:sources'
    compileOnly 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT'
    compileOnly 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT:javadoc'
    compileOnly 'org.spigotmc:spigot-api:1.12.2-R0.1-SNAPSHOT:sources'
    compileOnly 'com.mojang:authlib:1.5.21'
    implementation 'xyz.xenondevs:particle:1.8.1'
    compileOnly 'xyz.xenondevs:particle:1.8.1:javadoc'
    compileOnly 'xyz.xenondevs:particle:1.8.1:sources'
    compileOnly 'com.sk89q.worldedit:worldedit-core:7.2.2'
    compileOnly 'com.sk89q.worldedit:worldedit-core:7.2.2:javadoc'
    compileOnly 'com.sk89q.worldedit:worldedit-core:7.2.2:sources'
}

// Create shaded jar
shadowJar{
    minimize()
    archiveBaseName.set(project.name)
    archiveClassifier.set('')
    archiveVersion.set('')
}

[jar]*.dependsOn shadowJar

tasks.jar.configure{
    classifier = 'original'
}

tasks.shadowJar.configure{
    classifier = null
}

spigot{
    name = project.ext.pluginName
    main = project.ext.mainClass
    version = project.ext.version
    description = 'A new incredible LuckyBlock plugin'
    authors = ['I2000C']
    commands{
        alb{
            description = 'The main command of New Amazing Lucky Blocks'
        }
        nalb{
            description = 'The main command of New Amazing Lucky Blocks'
        }
    }
    softDepends = ['WorldEdit']
    apiVersion = '1.13'
}
